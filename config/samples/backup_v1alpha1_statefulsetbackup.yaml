apiVersion: backup.sts-backup.io/v1alpha1
kind: StatefulSetBackup
metadata:
  labels:
    app.kubernetes.io/name: statefulset-backup-operator
    app.kubernetes.io/managed-by: kustomize
  name: statefulsetbackup-sample
spec:
  statefulSetRef:
    name: postgresql
    namespace: default
  schedule: "0 2 * * *"  # Daily at 2 AM
  retentionPolicy:
    keepLast: 7
  # volumeSnapshotClassName: csi-hostpath-snapclass  # Optional: omit to use cluster default
  preBackupHook:
    command:
      - "echo"
      - "Starting backup"
  postBackupHook:
    command:
      - "echo"
      - "Backup completed"
